# Claude Code 자동 백업 시스템 지침

## 핵심 원칙
모든 코드 변경사항은 자동으로 Git commit되어야 하며, 각 commit은 명확한 한 줄 설명을 포함해야 합니다. 이를 통해 언제든지 이전 상태로 안전하게 되돌릴 수 있는 "타임머신" 기능을 제공합니다.

## 초기 설정 확인사항

### 1. Git 초기화 상태 확인
- 프로젝트 시작 시 반드시 Git이 초기화되어 있는지 확인
- `.git` 폴더가 존재하지 않으면 `git init` 실행
- `.gitignore` 파일이 없으면 프로젝트에 맞게 생성

### 2. 백업 시스템 활성화
사용자가 다음 중 하나를 요청하면 Git 백업 시스템을 활성화:
- "git init" 또는 "깃 초기화"
- "백업 시작" 또는 "버전 관리 시작"
- 프로젝트 시작 시 자동으로 제안

## 자동 Commit 규칙

### 1. Commit 시점
다음 상황에서 반드시 자동 commit 수행:
- 새 파일 생성 완료 시
- 기존 파일 수정 완료 시
- 파일 삭제 시
- 리팩토링 완료 시
- 버그 수정 완료 시
- 기능 추가 완료 시
- 의존성 변경 시 (package.json, requirements.txt 등)

### 2. Commit 메시지 형식
```bash
[카테고리] 구체적인 변경 내용

카테고리 예시:
- [추가] 새 기능 구현
- [수정] 기존 기능 개선
- [버그수정] 오류 해결
- [리팩토링] 코드 구조 개선
- [문서] 문서 업데이트
- [초기화] 프로젝트 시작
- [설정] 환경 설정 변경
- [삭제] 불필요한 파일 제거
```

## 백업 관련 명령어 인식
다음 명령어를 인식하고 적절히 처리:

### 1. 백업 확인 명령
- `/h-log` 또는 "백업 목록":
```bash
git log --oneline -n 20
```

- "전체 백업 목록":
```bash
git log --oneline
```

### 2. 되돌리기 명령
- `/h-revert [commit-id]` 또는 "되돌리기 [commit-id]":
```bash
git revert [commit-id] --no-edit
# 또는 안전한 경우
git reset --hard [commit-id]
```

### 3. 상태 확인 명령
- 현재 상태 확인: `git status`
- 변경사항 확인: `git diff`
- 브랜치 확인: `git branch`

## 작업 플로우

### 1. 프로젝트 시작
```bash
1. git init (이미 초기화되지 않은 경우)
2. git add .
3. git commit -m "[초기화] 프로젝트 시작"
```

### 2. 각 변경사항 처리
```bash
1. 코드 수정/생성/삭제 수행
2. git add [변경된 파일들]
3. git commit -m "[카테고리] 구체적 설명"
4. 사용자에게 commit 완료 알림
```

### 3. 되돌리기 처리
```bash
1. 현재 상태 저장 (필요시)
2. git log로 되돌릴 지점 확인
3. git reset 또는 revert 수행
4. 변경사항 확인 및 보고
```

## 안전장치

### 1. 되돌리기 전 백업
- 중요한 변경사항이 있을 경우, 되돌리기 전에 현재 상태를 별도 브랜치로 분리하여 commit

### 2. 민감 정보 보호
- API 키, 비밀번호, 개인정보는 commit 전 .gitignore에 추가
- 환경 변수 파일(.env)은 기본적으로 제외

### 3. 대용량 파일 처리
- 100MB 이상의 파일은 commit 전 사용자에게 확인
- node_modules, .DS_Store 등은 자동으로 .gitignore에 추가

## 자동화 스크립트
필요시 다음 자동화 스크립트 제공:

### Windows (auto-backup.bat)
```batch
@echo off
git add .
git commit -m "%1"
echo ✅ 백업 완료: %1
```

### Linux/Mac (auto-backup.sh)
```bash
#!/bin/bash
function auto_commit() {
    git add .
    git commit -m "$1"
    echo "✅ 백업 완료: $1"
}
```

## 주의사항

### 1. 자동 백업 원칙
- 사용자가 명시적으로 백업을 원하지 않는다고 하지 않는 한 항상 자동 commit
- 각 작업 완료 시점에 즉시 commit (배치 처리 금지)
- 작업 세션 종료 시 마지막 상태 commit 확인

### 2. 에러 처리
- commit 실패 시 이유를 분석하고 해결 방안 제시
- merge conflict 발생 시 사용자에게 상황 설명 및 해결 옵션 제공

### 3. 성능 고려사항
- 대규모 프로젝트의 경우 .gitignore로 불필요한 파일 제외
- commit 메시지는 간결하면서도 구체적으로 작성

## 통합 워크플로우

### Claude Code 사용 시 자동 실행 순서:
1. **프로젝트 시작**: Git 초기화 상태 확인
2. **코드 작성**: 실시간으로 변경사항 추적
3. **작업 완료**: 자동 commit 수행
4. **상태 알림**: 사용자에게 백업 완료 알림
5. **복원 준비**: 언제든 이전 상태로 되돌리기 가능

이 지침을 따라 모든 코드 변경사항을 안전하게 보관하고, 필요시 즉시 이전 상태로 복원할 수 있도록 합니다.